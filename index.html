<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Micronation Hub</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }
        header {
            background-color: #444;
            color: white;
            padding: 1em;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        #controls {
            margin: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .control {
            margin: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        canvas {
            border: 3px solid #444;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        #colorPickers {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        .colorPicker {
            margin: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Digital Flag Maker</h1>
    </header>

    <div id="controls">
        <!-- Line Settings -->
        <div class="control">
            <label for="lineCount">Number of Lines:</label>
            <input type="range" id="lineCount" min="1" max="20" value="3" onchange="updateLines()">
            <span id="lineCountDisplay">3</span>
            <br>
            <label for="orientation">Orientation:</label>
            <select id="orientation" onchange="drawCanvas()">
                <option value="horizontal">Horizontal</option>
                <option value="vertical">Vertical</option>
            </select>
        </div>

        <!-- Line Colors -->
        <div class="control">
            <label>Line Colors (1-5):</label>
            <div id="colorPickers">
                <input type="color" class="colorPicker" value="#ff0000">
                <input type="color" class="colorPicker" value="#ffffff">
                <input type="color" class="colorPicker" value="#0000ff">
                <input type="color" class="colorPicker" value="#00ff00">
                <input type="color" class="colorPicker" value="#ffff00">
            </div>
        </div>

        <!-- Shape Settings -->
        <div class="control">
            <label for="shape">Add Shape:</label>
            <select id="shape">
                <option value="circle">Circle</option>
                <option value="rectangle">Rectangle</option>
                <option value="triangle">Triangle</option>
                <option value="ellipse">Ellipse</option>
                <option value="star">Star</option>
                <option value="diamond">Diamond</option>
            </select>
            <label for="shapeColor">Color:</label>
            <input type="color" id="shapeColor" value="#000000">
            <button onclick="addShape()">Add Shape</button>
        </div>

        <!-- Action Buttons -->
        <div class="control">
            <button onclick="clearCanvas()">Clear Flag</button>
            <button onclick="downloadFlag()">Download Flag</button>
        </div>
    </div>

    <canvas id="flagCanvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('flagCanvas');
        const ctx = canvas.getContext('2d');
        const colorPickers = document.querySelectorAll('.colorPicker');
        let shapes = [];
        let lineCount = 3;
        let orientation = 'horizontal';

        function drawLines() {
            const colors = Array.from(colorPickers).map(picker => picker.value);
            const repeatingColors = [];
            for (let i = 0; i < lineCount; i++) {
                repeatingColors.push(colors[i % colors.length]);
            }

            if (orientation === 'horizontal') {
                const lineHeight = canvas.height / lineCount;
                for (let i = 0; i < lineCount; i++) {
                    ctx.fillStyle = repeatingColors[i];
                    ctx.fillRect(0, i * lineHeight, canvas.width, lineHeight);
                }
            } else {
                const lineWidth = canvas.width / lineCount;
                for (let i = 0; i < lineCount; i++) {
                    ctx.fillStyle = repeatingColors[i];
                    ctx.fillRect(i * lineWidth, 0, lineWidth, canvas.height);
                }
            }
        }

        function addShape() {
            const shapeType = document.getElementById('shape').value;
            const color = document.getElementById('shapeColor').value;

            shapes.push({ type: shapeType, color, x: 400, y: 200, size: 50 });
            drawCanvas();
        }

        function drawShapes() {
            shapes.forEach(shape => {
                ctx.fillStyle = shape.color;
                switch (shape.type) {
                    case 'circle':
                        ctx.beginPath();
                        ctx.arc(shape.x, shape.y, shape.size, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'rectangle':
                        ctx.fillRect(shape.x - shape.size, shape.y - shape.size, shape.size * 2, shape.size * 2);
                        break;
                    case 'triangle':
                        ctx.beginPath();
                        ctx.moveTo(shape.x, shape.y - shape.size);
                        ctx.lineTo(shape.x - shape.size, shape.y + shape.size);
                        ctx.lineTo(shape.x + shape.size, shape.y + shape.size);
                        ctx.closePath();
                        ctx.fill();
                        break;
                    case 'ellipse':
                        ctx.beginPath();
                        ctx.ellipse(shape.x, shape.y, shape.size, shape.size / 2, 0, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 'star':
                        drawStar(shape.x, shape.y, 5, shape.size, shape.size / 2);
                        break;
                    case 'diamond':
                        ctx.beginPath();
                        ctx.moveTo(shape.x, shape.y - shape.size);
                        ctx.lineTo(shape.x - shape.size, shape.y);
                        ctx.lineTo(shape.x, shape.y + shape.size);
                        ctx.lineTo(shape.x + shape.size, shape.y);
                        ctx.closePath();
                        ctx.fill();
                        break;
                }
            });
        }

        function drawStar(cx, cy, spikes, outerRadius, innerRadius) {
            let rot = Math.PI / 2 * 3;
            let x = cx;
            let y = cy;
            const step = Math.PI / spikes;

            ctx.beginPath();
            ctx.moveTo(cx, cy - outerRadius);
            for (let i = 0; i < spikes; i++) {
                x = cx + Math.cos(rot) * outerRadius;
                y = cy + Math.sin(rot) * outerRadius;
                ctx.lineTo(x, y);
                rot += step;

                x = cx + Math.cos(rot) * innerRadius;
                y = cy + Math.sin(rot) * innerRadius;
                ctx.lineTo(x, y);
                rot += step;
            }
            ctx.lineTo(cx, cy - outerRadius);
            ctx.closePath();
            ctx.fill();
        }

        function updateLines() {
            lineCount = document.getElementById('lineCount').value;
            document.getElementById('lineCountDisplay').textContent = lineCount;
            drawCanvas();
        }

        function drawCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawLines();
            drawShapes();
        }

        function clearCanvas() {
            lineCount = 3;
            shapes = [];
            document.getElementById('lineCount').value = 3;
            document.getElementById('lineCountDisplay').textContent = '3';
            drawCanvas();
        }

        function downloadFlag() {
            const link = document.createElement('a');
            link.download = 'flag.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        drawCanvas();
    </script>
</body>
</html>
