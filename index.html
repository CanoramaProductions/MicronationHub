<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Flag Maker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }
        header {
            background-color: #444;
            color: white;
            padding: 1em;
            width: 100%;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
        }
        #page-selection {
            display: flex;
            justify-content: center;
            background-color: #444;
            color: white;
            padding: 10px;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        #page-selection button {
            background-color: #444;
            color: white;
            border: none;
            margin: 0 10px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1.2em;
        }
        #page-selection button:hover {
            background-color: #666;
        }
        #content {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 20px;
            padding: 20px;
            max-width: 1200px;
            width: 100%;
        }
        #controls {
            display: flex;
            flex-direction: column;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 300px;
            width: 100%;
            margin-right: 20px;
        }
        .control {
            margin-bottom: 15px;
        }
        .control label {
            display: block;
            margin-bottom: 5px;
        }
        .control input,
        .control select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .control button {
            padding: 10px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .control button:hover {
            background-color: #666;
        }
        canvas {
            border: 3px solid #444;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex-grow: 1;
            max-width: 800px;
            max-height: 500px;
        }
        #shapeControls {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .shapeItem {
            display: flex;
            flex-direction: column;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .shapeItem .shapeHandle {
            cursor: move;
            padding: 5px;
            background-color: #ccc;
            text-align: center;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<header>
    <h1>Digital Flag Maker</h1>
</header>

<div id="page-selection">
    <button onclick="navigatePage('flagMaker')">Flag Maker</button>
    <button onclick="navigatePage('gallery')">Gallery</button>
    <button onclick="navigatePage('settings')">Settings</button>
    <button onclick="navigatePage('help')">Help</button>
    <button onclick="navigatePage('about')">About</button>
</div>

<div id="content">
    <div id="controls">
        <!-- Line Settings -->
        <div class="control">
            <label for="lineCount">Number of Lines:</label>
            <input type="range" id="lineCount" min="1" max="21" value="3" onchange="updateLines()">
            <span id="lineCountDisplay">3</span>
        </div>

        <!-- Line Orientation -->
        <div class="control">
            <label for="orientation">Orientation:</label>
            <select id="orientation" onchange="drawCanvas()">
                <option value="horizontal">Horizontal</option>
                <option value="vertical">Vertical</option>
            </select>
        </div>

        <!-- Line Colors -->
        <div class="control">
            <label>Line Colors (for 1-5 lines):</label>
            <div id="colorPickers"></div>
        </div>

        <!-- Shape Settings -->
        <div class="control">
            <label for="shape">Add Shape:</label>
            <select id="shape">
                <option value="circle">Circle</option>
                <option value="rectangle">Rectangle</option>
                <option value="triangle">Triangle</option>
                <option value="ellipse">Ellipse</option>
                <option value="star">Star</option>
                <option value="diamond">Diamond</option>
            </select>
            <label for="shapeColor">Color:</label>
            <input type="color" id="shapeColor" value="#000000">
            <button onclick="addShape()">Add Shape</button>
        </div>

        <!-- Shape Controls -->
        <div id="shapeControls">
            <h3>Shape Controls</h3>
            <!-- Shape Items will be dynamically added here -->
        </div>

        <!-- Action Buttons -->
        <div class="control">
            <button onclick="clearCanvas()">Clear Flag</button>
            <button onclick="downloadFlag()">Download Flag</button>
        </div>
    </div>

    <canvas id="flagCanvas" width="800" height="400"></canvas>
</div>

<script>
    let currentPage = 'flagMaker';
    const canvas = document.getElementById('flagCanvas');
    const ctx = canvas.getContext('2d');
    const colorPickers = document.getElementById('colorPickers');
    let shapes = [];
    let lineCount = 3;
    let orientation = 'horizontal';

    // Function to update the line colors
    function updateLineColors() {
        colorPickers.innerHTML = '';  // Clear previous color pickers
        const lines = Math.min(lineCount, 5);  // Only 1-5 lines can have unique colors
        for (let i = 0; i < lines; i++) {
            const colorInput = document.createElement('input');
            colorInput.type = 'color';
            colorInput.value = `#${Math.floor(Math.random() * 16777215).toString(16)}`;  // Random color
            colorInput.addEventListener('change', updateCanvas);
            colorPickers.appendChild(colorInput);
        }
    }

    // Function to update line count and trigger canvas redraw
    function updateLines() {
        lineCount = parseInt(document.getElementById('lineCount').value);
        document.getElementById('lineCountDisplay').textContent = lineCount;
        updateLineColors();
        drawCanvas();
    }

    // Function to draw lines on the canvas
    function drawLines() {
        const colors = Array.from(colorPickers.querySelectorAll('input[type=color]')).map(picker => picker.value);
        const repeatingColors = [colors[0], colors[1]]; // Always two colors for lines

        if (lineCount <= 5) {
            for (let i = 0; i < lineCount; i++) {
                ctx.fillStyle = colors[i] || repeatingColors[i % 2];
                if (orientation === 'horizontal') {
                    const lineHeight = canvas.height / lineCount;
                    ctx.fillRect(0, i * lineHeight, canvas.width, lineHeight);
                } else {
                    const lineWidth = canvas.width / lineCount;
                    ctx.fillRect(i * lineWidth, 0, lineWidth, canvas.height);
                }
            }
        } else {
            // For line counts 6–21, use only 2 colors
            for (let i = 0; i < lineCount; i++) {
                ctx.fillStyle = repeatingColors[i % 2];
                if (orientation === 'horizontal') {
                    const lineHeight = canvas.height / lineCount;
                    ctx.fillRect(0, i * lineHeight, canvas.width, lineHeight);
                } else {
                    const lineWidth = canvas.width / lineCount;
                    ctx.fillRect(i * lineWidth, 0, lineWidth, canvas.height);
                }
            }
        }
    }

    // Draw shapes on the canvas
    function drawShapes() {
        shapes.forEach(shape => {
            ctx.save();
            ctx.translate(shape.x, shape.y);
            ctx.rotate(shape.rotation * Math.PI / 180);

            ctx.fillStyle = shape.color;
            if (shape.type === 'circle') {
                ctx.beginPath();
                ctx.arc(0, 0, shape.size, 0, Math.PI * 2);
                ctx.fill();
            } else if (shape.type === 'rectangle') {
                ctx.fillRect(-shape.width / 2, -shape.height / 2, shape.width, shape.height);
            } else if (shape.type === 'triangle') {
                ctx.beginPath();
                ctx.moveTo(0, -shape.height / 2);
                ctx.lineTo(-shape.width / 2, shape.height / 2);
                ctx.lineTo(shape.width / 2, shape.height / 2);
                ctx.closePath();
                ctx.fill();
            } else if (shape.type === 'ellipse') {
                ctx.beginPath();
                ctx.ellipse(0, 0, shape.width / 2, shape.height / 2, 0, 0, Math.PI * 2);
                ctx.fill();
            } else if (shape.type === 'star') {
                drawStar(0, 0, shape.size, shape.size / 2, 5);
            } else if (shape.type === 'diamond') {
                ctx.beginPath();
                ctx.moveTo(0, -shape.height / 2);
                ctx.lineTo(-shape.width / 2, 0);
                ctx.lineTo(0, shape.height / 2);
                ctx.lineTo(shape.width / 2, 0);
                ctx.closePath();
                ctx.fill();
            }
            ctx.restore();
        });
    }

    // Draw star (for star shape)
    function drawStar(x, y, radius1, radius2, npoints) {
        let rot = (Math.PI / 2) * 3;
        let step = Math.PI / npoints;

        ctx.beginPath();
        ctx.moveTo(x, y - radius1);
        for (let i = 0; i < npoints; i++) {
            x = x + Math.cos(rot) * radius1;
            y = y + Math.sin(rot) * radius1;
            ctx.lineTo(x, y);
            rot += step;

            x = x + Math.cos(rot) * radius2;
            y = y + Math.sin(rot) * radius2;
            ctx.lineTo(x, y);
            rot += step;
        }
        ctx.closePath();
        ctx.fill();
    }

    // Function to add a shape
    function addShape() {
        const shapeType = document.getElementById('shape').value;
        const shapeColor = document.getElementById('shapeColor').value;

        const shape = {
            type: shapeType,
            color: shapeColor,
            x: canvas.width / 2,
            y: canvas.height / 2,
            size: 50,
            width: 50,
            height: 50,
            rotation: 0,
        };

        shapes.push(shape);
        updateShapeControls();
        drawCanvas();
    }

    // Update shape controls UI
    function updateShapeControls() {
        const shapeControlsContainer = document.getElementById('shapeControls');
        shapeControlsContainer.innerHTML = '';

        shapes.forEach((shape, index) => {
            const shapeControl = document.createElement('div');
            shapeControl.classList.add('shapeItem');
            shapeControl.innerHTML = `
                <div class="shapeHandle">☰</div>
                <label>Type: ${shape.type}</label>
                <label>Color: <input type="color" value="${shape.color}" onchange="updateShapeColor(${index}, event)"></label>
                <label>X: <input type="number" value="${shape.x}" onchange="updateShapePosition(${index}, 'x', event)"></label>
                <label>Y: <input type="number" value="${shape.y}" onchange="updateShapePosition(${index}, 'y', event)"></label>
                <label>Size: <input type="number" value="${shape.size}" onchange="updateShapeSize(${index}, 'size', event)"></label>
                <label>Width: <input type="number" value="${shape.width}" onchange="updateShapeSize(${index}, 'width', event)"></label>
                <label>Height: <input type="number" value="${shape.height}" onchange="updateShapeSize(${index}, 'height', event)"></label>
                <label>Rotation: <input type="number" value="${shape.rotation}" onchange="updateShapeRotation(${index}, event)"></label>
                <button onclick="deleteShape(${index})">Delete</button>
            `;
            shapeControlsContainer.appendChild(shapeControl);
        });
    }

    // Update shape color
    function updateShapeColor(index, event) {
        shapes[index].color = event.target.value;
        drawCanvas();
    }

    // Update shape position
    function updateShapePosition(index, axis, event) {
        shapes[index][axis] = parseFloat(event.target.value);
        drawCanvas();
    }

    // Update shape size
    function updateShapeSize(index, axis, event) {
        shapes[index][axis] = parseFloat(event.target.value);
        drawCanvas();
    }

    // Update shape rotation
    function updateShapeRotation(index, event) {
        shapes[index].rotation = parseFloat(event.target.value);
        drawCanvas();
    }

    // Delete shape
    function deleteShape(index) {
        shapes.splice(index, 1);
        updateShapeControls();
        drawCanvas();
    }

    // Draw everything on the canvas
    function drawCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawLines();
        drawShapes();
    }

    // Clear the canvas
    function clearCanvas() {
        lineCount = 3;
        shapes = [];
        document.getElementById('lineCount').value = 3;
        document.getElementById('lineCountDisplay').textContent = '3';
        updateLineColors();
        drawCanvas();
    }

    // Download the flag as an image
    function downloadFlag() {
        const link = document.createElement('a');
        link.download = 'flag.png';
        link.href = canvas.toDataURL();
        link.click();
    }

    // Navigate to different pages
    function navigatePage(page) {
        currentPage = page;
        alert(`Navigating to ${page}`);
    }

    // Initialize the flag creation tool
    updateLineColors();
    drawCanvas();
</script>

</body>
</html>
